<vex-page-layout mode="card">
    <vex-page-layout-header class="h-6"></vex-page-layout-header>
    <vex-page-layout-content class="-mt-6" [class.px-gutter]="true">
        <div class="flex flex-col sm:flex-row gap-4">
            <div @fadeInUp class="card flex-auto">
                <!-- TITULO -->
                <div class="px-6 py-4 border-b flex items-center">
                    <h2 class="title m-0">Cancelación en el Registro de Precalificación de Empresas Supervisoras</h2>
                </div>
                <div class="flex flex-col">
                    <mat-accordion>
                        <mat-expansion-panel class="mt-2" expanded="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title class="font-bold">CANCELACIÓN EN EL REGISTRO</mat-panel-title>
                            </mat-expansion-panel-header>
                            <ng-container *ngTemplateOutlet="form"></ng-container>
                            <div class="flex flex-col sm:flex-row sm:gap-2 items-center justify-end">
                                <button *ngIf="editable && SUSPENCION_CANCELACION?.idSuspensionCancelacion" color="primary" mat-raised-button type="button" class="hover-class" (click)="eliminar()">Eliminar Programación</button>
                                <button *ngIf="editable" color="primary" mat-raised-button type="button" class="hover-class" (click)="suspender()">Cancelar Registro</button>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
            </div>
        </div>
    </vex-page-layout-content>
</vex-page-layout>

<ng-template #form>
    <div class="mt-4 flex flex-col">
        <div @fadeInUp class="flex-auto">
            <div class="flex flex-col">
                <div class="flex flex-col sm:flex-row sm:gap-4">
                    <mat-form-field class="flex-auto">
                        <mat-label>N° de Identificación Tributaria</mat-label>
                        <input [formControl]="formGroup.controls.numeroDocumento" matInput maxlength="150">
                    </mat-form-field>
                    <mat-form-field class="flex-auto">
                        <mat-label>Razón Social o Nombres y Apellidos</mat-label>
                        <input [formControl]="formGroup.controls.razonSocial" matInput maxlength="150">
                    </mat-form-field>
                </div>
                
                <mat-form-field  class="flex-auto">
                    <mat-label>Fecha de Inicio de Cancelación</mat-label>
                    <input [formControl]="formGroup.controls.fechaInicio" type="date" min="{{dateHoy | date:'yyyy-MM-dd'}}" matInput>
                    <mat-error *ngIf="formGroup.get('fechaInicio').hasError('required')">Ingrese Fecha de Inicio de Suspensión</mat-error>
                </mat-form-field>
                
                <mat-form-field class="flex-auto">
                    <mat-label>Causal</mat-label>
                    <mat-select [formControl]="formGroup.controls.causal" [compareWith]="compareSelecIdListadoDetalle">
                        <mat-option *ngFor="let obj of listCausalSuspender" [value]="obj">
                            {{ obj.nombre }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="formGroup.get('causal').hasError('required')">Seleccione Tipo de
                        Documento</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Sustento de la Cancelación</mat-label>
                    <textarea matInput #sustento [formControl]="formGroup.controls.sustento" maxlength="256" placeholder="Ingrese sustento de la suspensión..."></textarea>
                    <mat-hint align="end">{{sustento.value.length}} / 256</mat-hint>
                </mat-form-field>
            </div>
        </div>
    </div>
</ng-template>