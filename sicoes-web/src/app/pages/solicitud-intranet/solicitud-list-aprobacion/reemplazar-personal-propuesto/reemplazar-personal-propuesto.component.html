<div class="flex flex-col sm:flex-row gap-4">
  <div @fadeInUp class="flex-auto">
    <mat-divider class="-mr-6 -ml-6"></mat-divider>
    <div class="py-4 flex flex-col">
      <div class="flex flex-col sm:flex-row sm:gap-4">
        <mat-form-field class="flex-auto">
          <mat-label>N° Expediente</mat-label>
          <input [formControl]="formGroupPerfeccionamiento.controls.nroExpedienteP" matInput />
        </mat-form-field>
        <mat-form-field class="flex-auto">
          <mat-label>Contratista</mat-label>
          <input [formControl]="formGroupPerfeccionamiento.controls.contratistaP" matInput />
        </mat-form-field>
        <mat-form-field class="flex-auto">
          <mat-label>Tipo de Contrato</mat-label>
          <mat-select [formControl]="formGroupPerfeccionamiento.controls.tipoContratoP"
            [compareWith]="compareSelecIdListadoDetalle">
            <mat-option *ngFor="let obj of listTipoContrato" [value]="obj">
              {{ obj.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="flex flex-col sm:flex-row sm:gap-4">
        <mat-form-field class="flex-auto">
          <mat-label>Tipo Aprobación</mat-label>
          <mat-select [formControl]="formGroupPerfeccionamiento.controls.tipoAprobacionP"
            [compareWith]="compareSelecIdListadoDetalle">
            <mat-option *ngFor="let obj of listTipoAprobacionP" [value]="obj">
              {{ obj.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="flex-auto">
          <mat-label>Estado Aprobación</mat-label>
          <mat-select [formControl]="formGroupPerfeccionamiento.controls.estadoAprobacionP"
            [compareWith]="compareSelecIdListadoDetalle">
            <mat-option *ngFor="let obj of listEstadoAprobacionP" [value]="obj">
              {{ obj.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <div class="flex-auto"></div>
      </div>
      <div class="flex flex-col sm:flex-row sm:gap-2 items-center justify-end">
        <button color="primary" style="margin-right: auto;" mat-raised-button type="button"
          (click)="aprobarVistoBuenoFirmarPerfeccionamiento('add')">
          Aprobar
        </button>
        <button color="primary" mat-raised-button type="button" (click)="buscarPerfeccionamiento()">
          Buscar
        </button>
        <button color="primary" mat-raised-button type="button" (click)="limpiarPerfeccionamiento()">
          Limpiar
        </button>
      </div>
    </div>
  </div>
</div>
<div class="overflow-auto shadow-2xl rounded">
  <table class="w-full border" mat-table matSort [dataSource]="dataSourcePerfeccionamiento">
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <mat-checkbox color="primary" (change)="actualizarListaExpedientePerfeccionamiento($event, element)">
        </mat-checkbox>
      </td>
    </ng-container>

    <!--<ng-container matColumnDef="tipoAprobacion">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Tipo Aprobación</th>
                <td mat-cell *matCellDef="let element">{{ element.tipoAprobacion?.nombre }}</td>
              </ng-container>-->

    <ng-container matColumnDef="tipoAprobacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Tipo Aprobación</th>
      <td mat-cell *matCellDef="let element">{{ element.solicitudPerfCont.propuesta.procesoItem.proceso.numeroExpediente
        }}</td>
    </ng-container>

    <ng-container matColumnDef="numeroExpediente">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Número expediente</th>
      <td mat-cell *matCellDef="let element">
        {{ element.documento }}
      </td>
    </ng-container>

    <ng-container matColumnDef="documento">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Documento</th>
      <td mat-cell *matCellDef="let element">{{ element.solicitudPerfCont.tipoContratacion.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="tp">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>TP</th>
      <td mat-cell *matCellDef="let element">{{ element.solicitudPerfCont.tipoContratacion.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="contratista">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Contratista</th>
      <td mat-cell *matCellDef="let element">{{ element.solicitudPerfCont.propuesta.supervisora.nombreRazonSocial }}
      </td>
    </ng-container>

    <ng-container matColumnDef="tipoSolicitud">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Tipo Solicitud</th>
      <td mat-cell *matCellDef="let element">{{ element.solicitudPerfCont.tipoContratacion.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="fechaIngreso">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha Ingreso</th>
      <td mat-cell *matCellDef="let element">{{ element.fechaSuscripcionContrato }}</td>
    </ng-container>

    <ng-container matColumnDef="estadoAprobacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado Aprobación</th>
      <td mat-cell *matCellDef="let element">{{ element.idEstadoEval.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="estadoAprobacionLogistica">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado Aprobación Gerente División</th>
      <td mat-cell *matCellDef="let element">{{ element.estadoEvalLog?.nombre || ' ' }}</td>
    </ng-container>

    <ng-container matColumnDef="estadoVbGAF">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado Aprobación Gerente Linea</th>
      <td mat-cell *matCellDef="let element">{{ element.estadoEvalGaf?.nombre || ' ' }}</td>
    </ng-container>

    <ng-container matColumnDef="actionsPerfeccionamiento">
      <th *matHeaderCellDef mat-header-cell mat-sort-header>Acciones</th>
      <td *matCellDef="let row" class="w-10 text-secondary" mat-cell>
        <!--button (click)="$event.stopPropagation()" [matMenuTriggerData]="{ row: row }"
          [matMenuTriggerFor]="actionsMenuPerfeccionamiento" mat-icon-button type="button">
          <mat-icon svgIcon="mat:more_horiz"></mat-icon>
        </button-->
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsPerfeccionamiento"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsPerfeccionamiento"></tr>

    <ng-container matColumnDef="loadingPerfeccionamiento">
      <td mat-footer-cell *matFooterCellDef colspan="12" class="text-center">Cargando Datos...</td>
    </ng-container>

    <ng-container matColumnDef="vacioPerfeccionamiento">
      <td mat-footer-cell *matFooterCellDef colspan="12" class="text-center text-primary">No se
        encuentran resultados para los filtros seleccionados</td>
    </ng-container>

    <tr mat-footer-row *matFooterRowDef="['vacioPerfeccionamiento']"
      [ngClass]="{ hide: !(dataSourcePerfeccionamiento.data.length === 0) }"></tr>
  </table>
  <mat-paginator #paginatorPerfeccionamiento class="sticky left-0" [pageSizeOptions]="[10, 20, 30]"
    (page)="pageChangePerfeccionamiento($event)" showFirstLastButtons></mat-paginator>
</div>