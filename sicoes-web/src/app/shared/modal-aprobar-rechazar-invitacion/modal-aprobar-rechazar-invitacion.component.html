<form>
    <vex-modal-title [titulo]="'Evaluar Invitación'"></vex-modal-title>
    
    <mat-divider class="-mx-6 text-border"></mat-divider>
    <mat-dialog-content class="flex flex-col">
        
        <!-- Información de la invitación -->
        <div class="invitation-info mb-4">
            <h3 class="font-medium text-lg mb-2">Información de la Invitación</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <span class="text-sm text-gray-600">Número de Expediente:</span>
                    <p class="font-medium">{{ invitacion?.numeroExpediente || 'N/A' }}</p>
                </div>
                <div>
                    <span class="text-sm text-gray-600">Nombre del Item:</span>
                    <p class="font-medium">{{ invitacion?.nombreItem || 'N/A' }}</p>
                </div>
                <div>
                    <span class="text-sm text-gray-600">Estado:</span>
                    <p class="font-medium">{{ invitacion?.estadoInvitacion?.nombre || 'N/A' }}</p>
                </div>
                <div>
                    <span class="text-sm text-gray-600">Fecha de Creación:</span>
                    <p class="font-medium">{{ invitacion?.fechaCreacion | date:'dd/MM/yyyy' || 'N/A' }}</p>
                </div>
            </div>
        </div>

        <mat-form-field class="mt-6 flex-auto">
            <mat-label>Observaciones</mat-label>
            <textarea 
                matInput 
                [formControl]="formGroup.controls.observacion" 
                maxlength="500"
                placeholder="Ingrese observaciones sobre la evaluación de la invitación"
                rows="4">
            </textarea>
            <mat-hint align="end">{{formGroup.controls.observacion.value?.length || 0}}/500</mat-hint>
        </mat-form-field>

        <!-- Mostrar observación requerida solo para rechazo -->
        <div *ngIf="mostrarErrorObservacion" class="text-red-500 text-sm mt-1">
            Las observaciones son requeridas para rechazar la invitación
        </div>

    </mat-dialog-content>
    
    <mat-dialog-actions align="end">
        <button 
            mat-raised-button 
            color="primary" 
            (click)="evaluarInvitacion('ACEPTAR')"
            [disabled]="isLoading">
            <mat-icon *ngIf="isLoading && accionSeleccionada === 'ACEPTAR'">refresh</mat-icon>
            Aprobar
        </button>
        <button 
            mat-raised-button 
            color="warn" 
            (click)="evaluarInvitacion('RECHAZAR')"
            [disabled]="isLoading">
            <mat-icon *ngIf="isLoading && accionSeleccionada === 'RECHAZAR'">refresh</mat-icon>
            Rechazar
        </button>
        <button 
            mat-button 
            (click)="closeModal()"
            [disabled]="isLoading">
            Cancelar
        </button>
    </mat-dialog-actions>
</form>