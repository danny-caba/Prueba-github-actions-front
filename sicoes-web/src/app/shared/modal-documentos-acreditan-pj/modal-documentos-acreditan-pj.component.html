<form>
    <vex-modal-title *ngIf="booleanAdd && flagTerminos"
        [titulo]="'DOCUMENTOS QUE ACREDITAN LA EXPERIENCIA EN EL SECTOR'">
    </vex-modal-title>
    <vex-modal-title *ngIf="booleanAdd && !flagTerminos" [titulo]="'Agregar Experiencia'"></vex-modal-title>
    <vex-modal-title *ngIf="booleanEdit" [titulo]="'Editar Experiencia'"></vex-modal-title>
    <vex-modal-title *ngIf="booleanView" [titulo]="'Ver Experiencia'"></vex-modal-title>

    <vex-modal-title *ngIf="booleanEvaluar || booleanViewEval" [titulo]="'Experiencia'"></vex-modal-title>

    <mat-dialog-content *ngIf="booleanAdd && flagTerminos" class="flex flex-col">
        <div mat-dialog-content>
            <p style="text-align: justify;" class="mt-4">
                Acreditar experiencia general en el sector energético y/o minero, según corresponda.  Para tal efecto el solicitante deberá acreditar en los últimos ocho (8) años, contados a partir de la fecha de presentación de la solicitud de inscripción en el Registro, una facturación mínima de cien mil soles (S/ 100 000,00).
            </p>
            <br>
            <p style="text-align: justify;">
                Para la Etapa de Concurso, solo podrán participar aquellas empresas que hayan acreditado en el Registro, como mínimo, una facturación equivalente al cincuenta por ciento (50%) del valor estimado del concurso convocado. 
            </p>
            <br>
            <p style="text-align: justify;">
                Los documentos para acreditar la experiencia son los siguientes:
            </p>
            <br>
            <p style="text-align: justify;"><strong>1) </strong>
                Copia simple de contratos u órdenes de servicios, y su respectiva conformidad por la prestación efectuada; o comprobantes de pago cuya cancelación se acredite documental y fehacientemente, con voucher de depósito, estado de cuenta y/o cancelación del documento. 
            </p>
            <br>
            <p style="text-align: justify;"><strong>2) </strong>
                En el caso de servicios de ejecución periódica, solo se considera como experiencia la parte del contrato que haya sido ejecutada a la fecha de presentación de la solicitud de inscripción, debiendo adjuntarse copia de las conformidades correspondientes a tal parte o los respectivos comprobantes de pago cancelados.
            </p>
            <br>
            <p style="text-align: justify;"><strong>3) </strong>
                Cuando el solicitante presente contratos donde haya sido integrante de un consorcio, su experiencia es considerada en forma proporcional a su porcentaje de participación según el contrato de consorcio. Esta experiencia deberá estar relacionada al sector energético y/o minero, según corresponda. Para estos casos, además de lo señalado en los literales b.1) y b.2), según corresponda, debe presentarse el contrato de consorcio del cual se desprenda fehacientemente el porcentaje de las obligaciones que se asumió en el contrato presentado; de lo contrario, no se computará la experiencia proveniente de dicho contrato.
            </p>
            <br>
        </div>
    </mat-dialog-content>
    <mat-dialog-content *ngIf="!flagTerminos" class="flex flex-col">

        <vex-cmp-tipo-revision *ngIf="booleanEvaluar" (changeVersion)="changeVersion($event)"
            [editable]="cmpTipoRevisionEdit"></vex-cmp-tipo-revision>

        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Tipo de Documento</mat-label>
                <mat-select [formControl]="formGroup.controls.tipoDocumento"
                    [compareWith]="compareSelecIdListadoDetalle">
                    <mat-option *ngFor="let obj of listTipoDocumento" [value]="obj">
                        {{ obj.nombre }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="formGroup.get('tipoDocumento').hasError('required')">Seleccione Tipo de Documento
                </mat-error>
            </mat-form-field>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>País</mat-label>
                <mat-select [formControl]="formGroup.controls.pais" [compareWith]="compareSelecIdListadoDetalle">
                    <mat-option *ngFor="let obj of listPais" [value]="obj">
                        {{ obj.nombre }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="formGroup.get('pais').hasError('required')">Seleccione País
                </mat-error>
            </mat-form-field>
            <mat-form-field class="flex-auto">
                <mat-label>Tipo de Identificación Tributaria</mat-label>
                <mat-select [formControl]="formGroup.controls.tipoIdentificacion"
                    [compareWith]="compareSelecIdListadoDetalle">
                    <mat-option *ngFor="let obj of listTipoidentificacion" [value]="obj">
                        {{ obj.nombre }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="formGroup.get('tipoIdentificacion').hasError('required')">Seleccione Tipo de
                    Identificación Tributaria
                </mat-error>
            </mat-form-field>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>N° de Identificación Tributaria</mat-label>
                <input [formControl]="formGroup.controls.numeroDocumento" maxlength="15" (keypress)="numberOnly($event)"
                    matInput>
                <mat-error *ngIf="formGroup.get('numeroDocumento').hasError('required')">Ingrese N° de
                    Identificación Tributaria
                </mat-error>
            </mat-form-field>
            <mat-form-field class="flex-auto">
                <mat-label>Razón Social</mat-label>
                <input [formControl]="formGroup.controls.nombreEntidad" maxlength="150" matInput>
                <mat-error *ngIf="formGroup.get('nombreEntidad').hasError('required')">Ingrese Razón Social
                </mat-error>
            </mat-form-field>
            <div style="padding-top: 12px;" *ngIf="booleanView == false">
                <button (click)="consultaRuc()" color="primary" mat-raised-button [disabled]="!flagValidar"
                    type="button">Validar</button>
            </div>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>N° de Contrato/OS/Comprobante de Pago</mat-label>
                <input [formControl]="formGroup.controls.codigoContrato" maxlength="30" matInput>
                <mat-error *ngIf="formGroup.get('codigoContrato').hasError('required')">Ingrese N° de
                    Contrato/OS/Comprobante de Pago
                </mat-error>
            </mat-form-field>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Objeto de Contrato/OS</mat-label>
                <input [formControl]="formGroup.controls.descripcionContrato" maxlength="150" matInput>
                <mat-error *ngIf="formGroup.get('descripcionContrato').hasError('required')">Ingrese Objeto de
                    Contrato/OS
                </mat-error>
            </mat-form-field>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Fecha del Contrato/OS/CP <b>(1)</b></mat-label>
                <input [formControl]="formGroup.controls.fechaInicio" type="date" max="{{dateHoy | date:'yyyy-MM-dd'}}" matInput>
                <mat-error *ngIf="formGroup.get('fechaInicio').hasError('required')">Ingrese Fecha Inicio
                </mat-error>
            </mat-form-field>
            <mat-form-field class="flex-auto">
                <mat-label>Fecha Fin de Contrato/OS</mat-label>
                <input [formControl]="formGroup.controls.fechaFin" type="date" max="{{dateHoy | date:'yyyy-MM-dd'}}" matInput>
                <mat-error *ngIf="formGroup.get('fechaFin').hasError('required')">Ingrese Fecha Fin de Contrato/OS
                </mat-error>
            </mat-form-field>
            <div style="padding-top: 12px;">
                <mat-checkbox color="primary" [formControl]="formGroup.controls.flagVigente">Vigente</mat-checkbox>
            </div>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Duración</mat-label>
                <input [formControl]="formGroup.controls.duracion" [readonly]="true" matInput>
            </mat-form-field>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Sub-Sector</mat-label>
                <mat-select [formControl]="formGroup.controls.subSectorDoc" [compareWith]="compareSelecIdListadoDetalle">
                  <mat-option *ngFor="let obj of listSubSectorDoc" [value]="obj">
                    {{ obj.descripcion }}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="formGroup.get('subSectorDoc').hasError('required')">Seleccione Sub-Sector</mat-error>
            </mat-form-field>
            
            

            <mat-form-field  class="flex-auto">
                <mat-label>Area</mat-label>
                <mat-select [formControl]="formGroup.controls.actividadArea" [compareWith]="compareSelecIdListadoDetalle">
                    <mat-option *ngFor="let obj of listActividadArea" [value]="obj">
                        {{ obj.nombre }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="formGroup.get('actividadArea').hasError('required')">Ingrese Area</mat-error>
            </mat-form-field>
            

        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-label>¿Cuenta conformidad?</mat-label>
        </div>
        <div>
            <mat-radio-group class="flex flex-col sm:flex-row sm:gap-4 mt-4"
                [formControl]="formGroup.controls.cuentaConformidad">
                <mat-radio-button *ngFor="let obj of listCuentaConformidad" [value]="obj">
                    {{ obj.nombre }}
                </mat-radio-button>
            </mat-radio-group>
            <mat-error class="ml-2 mt-1" style="font-family: Raleway; font-size: 11px"
                *ngIf=" formGroup.controls['cuentaConformidad'].touched && !flagConformidad">
                Ingrese conformidad
            </mat-error>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Monto contratado <b>(2)</b> </mat-label>
                <input [formControl]="formGroup.controls.montoContrato" (keypress)="decimalOnly($event)" matInput>
                <mat-error *ngIf="formGroup.get('montoContrato').hasError('required')">Ingrese Monto contratado
                </mat-error>
            </mat-form-field>
            <mat-form-field class="flex-auto">
                <mat-label>Moneda</mat-label>
                <mat-select [formControl]="formGroup.controls.tipoCambio" [compareWith]="compareSelecIdListadoDetalle">
                    <mat-option *ngFor="let obj of listTipoCambio" [value]="obj">
                        {{ obj.nombre }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="formGroup.get('tipoCambio').hasError('required')">Seleccione Moneda
                </mat-error>
            </mat-form-field>
            <mat-form-field class="flex-auto">
                <mat-label>Tipo de Cambio <b>(3)</b> </mat-label>
                <input [formControl]="formGroup.controls.montoTipoCambio" (keypress)="decimalOnly($event)" matInput>
                <mat-error *ngIf="formGroup.get('montoTipoCambio').hasError('required')">Ingrese Tipo de
                    Cambio
                </mat-error>
            </mat-form-field>
        </div>
        <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
            <mat-form-field class="flex-auto">
                <mat-label>Monto Facturado acumulado en soles</mat-label>
                <input [formControl]="formGroup.controls.montoContratoSol" (keypress)="decimalOnly($event)" matInput type="number">
                <mat-error *ngIf="formGroup.get('montoContratoSol').hasError('required')">Ingrese Monto
                    Facturado
                    acumulado en soles
                </mat-error>
            </mat-form-field>
        </div>
        <vex-form-adjuntos-btn #formAdjuntoBtn [codigo]="'TA08'" [titulo]="'Documento'" [archivo]="documento?.archivo"
            [solicitud]="solicitud"
            [editable]="booleanAdd || booleanEdit"></vex-form-adjuntos-btn>
        <div *ngIf="!flagTerminos">
            <p style="text-align: justify;" class="mt-4">
                <b>(1)</b> Se refiere a la fecha de suscripción del contrato, de la emisión de la orden de servicios
                si
                fuera el
                caso, o de cancelación del comprobante de pago, según corresponda
            </p>
            <br>
            <p style="text-align: justify;">
                <b>(2)</b> Se refiere al monto del contrato ejecutado incluido adicionales y reducciones, de ser el
                caso.
            </p>
            <br>
            <p style="text-align: justify;">
                <b>(3)</b> El tipo de cambio venta debe corresponder al publicado por la SBS correspondiente a la
                fecha
                de
                suscripción
                del contrato, de la emisión de la orden de servicios de ser el caso, o de cancelación del
                comprobante de
                pago,
                según corresponda.
            </p>
        </div>

        <!--vex-cmp-opcion-evaluador *ngIf="booleanEvaluar" #cmpOpcionEvaluar [objEvaluar]="documento"
            [editable]="editableEvaluacion"></vex-cmp-opcion-evaluador-->

    </mat-dialog-content>
    <mat-dialog-actions align="end" *ngIf="flagTerminos">
        <button mat-raised-button color="primary" (click)="entendido()">Entendido</button>
        <button mat-raised-button color="primary" (click)="closeModal()">Cancelar</button>
    </mat-dialog-actions>
    <mat-dialog-actions align="end" *ngIf="!flagTerminos">
        <button mat-raised-button color="primary" *ngIf="booleanAdd" (click)="guardar()">Guardar</button>
        <button mat-raised-button color="primary" *ngIf="booleanEdit" (click)="actualizar()">Actualizar</button>
        <!--GUARDAR EVALUACION-->
        <button mat-raised-button color="primary" *ngIf="booleanEvaluar== true && booleanViewEval == false"
            (click)="evaluar()">Guardar</button>
        <button mat-raised-button color="primary" (click)="closeModal()">Cancelar</button>
    </mat-dialog-actions>
</form>